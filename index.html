<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cotizaciones - Noticias</title>
<style>
:root {
    --color-primary: #005baa;
    --color-text-dark: #2c3e50;
    --color-text-light: #444f5a;
    --color-background-light: #f9f9f9;
    --color-card-background: #fefefe;
    --shadow-base: 0 0 15px rgba(0,0,0,0.1);
    --shadow-hover: 0 12px 32px rgba(0,0,0,0.15);
}
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: var(--color-background-light);
    color: var(--color-text-dark);
}
header {
    background-color: var(--color-primary);
    color: white;
    padding: 20px;
    text-align: center;
    position: relative;
}
header h1 {
    margin: 0;
    font-size: 2rem;
}
nav {
    margin-top: 10px;
}
nav a {
    color: white;
    margin: 0 10px;
    text-decoration: none;
    font-weight: bold;
}
nav a:hover { text-decoration: underline; }
#acciones-barra-superior {
    max-width: 900px;
    margin: 30px auto;
    background: white;
    border-radius: 10px;
    box-shadow: var(--shadow-base);
    padding: 20px;
    text-align: center;
}
main {
    max-width: 900px;
    margin: 30px auto;
    background: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: var(--shadow-base);
}
#cotizaciones-dolar p { margin: 6px 0; font-size: 18px; }
#noticias { margin-top: 40px; text-align: left; }
#noticias h2 { color: var(--color-primary); text-align: center; font-size: 1.8rem; margin-bottom: 25px; }
#noticias-lista { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; list-style: none; padding: 0; margin: 0; }
#noticias-lista li {
    background: var(--color-card-background);
    border-radius: 10px;
    padding: 15px;
    box-shadow: var(--shadow-base);
    display: flex;
    flex-direction: column;
    min-height: 180px;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
}
#noticias-lista li:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-hover);
}
#noticias-lista li img { width: 100%; max-height: 140px; object-fit: cover; border-radius: 6px; margin-bottom: 10px; }
#noticias-lista li a { font-weight: bold; font-size: 1rem; text-decoration: none; color: var(--color-primary); margin-bottom: 6px; }
#noticias-lista li a:hover { text-decoration: underline; }
#noticias-lista li p { flex-grow: 1; font-size: 0.9rem; color: var(--color-text-light); margin-bottom: 10px; line-height: 1.3; }
#noticias-lista li time { font-size: 0.8rem; color: #666; opacity: 0.85; text-align: right; }
@media (max-width: 600px) {
    body { padding: 15px; }
    nav { display: flex; flex-direction: column; gap: 8px; }
    nav a { margin: 5px 0; }
    main { padding: 20px; }
}
</style>
</head>
<body>

<header>
    <h1>Cotizaciones - Noticias</h1>
    <nav>
        <a href="index.html">Inicio</a>
        <a href="Cotizador.html">Cotizador Dólar</a>
        <a href="cuit-cuil.html">CUIT/CUIL</a>
        <a href="validador.html">Validador CBU/CVU</a>
        <a href="contacto.html">Contacto</a>
    </nav>
</header>

<section id="acciones-barra-superior">
    <h3>Cotizaciones de Acciones</h3>
    <div id="tradingview-ticker"></div>
</section>

<main>
    <section id="cotizaciones-dolar">
        <h3>Cotizaciones del Dólar</h3>
        <div id="dolar-cotizaciones">
            <p>Cargando cotizaciones...</p>
        </div>
    </section>

    <section id="noticias">
        <h2>Noticias Económicas - Varias Fuentes</h2>
        <ul id="noticias-lista">
            <li>Cargando noticias...</li>
        </ul>
    </section>
</main>

<script>
// Cotizaciones Dólar
async function cargarCotizaciones() {
    const target = document.getElementById('dolar-cotizaciones');
    const urls = {
        blue: 'https://dolarapi.com/v1/dolares/blue',
        oficial: 'https://dolarapi.com/v1/dolares/oficial',
        mep: 'https://dolarapi.com/v1/dolares/bolsa'
    };
    try {
        const responses = await Promise.all(Object.values(urls).map(url => fetch(url)));
        let html = '';
        for (const [tipo, res] of Object.entries(responses)) {
            const data = await res.json();
            const label = Object.keys(urls).find(k => urls[k] === res.url);
            if (data.compra && data.venta) {
                html += `<p><strong>Dólar ${label}:</strong> Compra $${data.compra.toFixed(2)} - Venta $${data.venta.toFixed(2)}</p>`;
            } else {
                html += `<p style="color:crimson;">Error cargando Dólar ${label}</p>`;
            }
        }
        target.innerHTML = html + `<p style="font-size:12px;color:#666;margin-top:8px;">Última actualización: ${new Date().toLocaleString('es-AR')}</p>`;
    } catch(e) {
        target.innerHTML = `<p style="color:crimson;">Error cargando cotizaciones</p>`;
        console.error(e);
    }
}
cargarCotizaciones();
setInterval(cargarCotizaciones, 60000);

// Noticias
async function cargarNoticias() {
    const noticiasLista = document.getElementById('noticias-lista');
    noticiasLista.innerHTML = '<li>Cargando noticias...</li>';
    const proxy = 'https://api.allorigins.win/get?url=';
    const rssFeeds = [
        { name: 'Ámbito Financiero', url: 'https://www.ambito.com/rss/economia.xml', limit: 5 },
        { name: 'La Nación (Economía)', url: 'https://www.lanacion.com.ar/arc/outboundfeeds/rss/economia/', limit: 3 },
        { name: 'Clarín (Economía)', url: 'https://www.clarin.com/rss/economia/', limit: 2 }
    ];
    try {
        let allNewsItems = [];
        for (const feed of rssFeeds) {
            const res = await fetch(proxy + encodeURIComponent(feed.url));
            const data = await res.json();
            const parser = new DOMParser();
            const xml = parser.parseFromString(data.contents, "text/xml");
            const items = xml.querySelectorAll('item');
            items.forEach((item, i) => {
                if (i >= feed.limit) return;
                const title = item.querySelector('title')?.textContent || 'Sin título';
                const link = item.querySelector('link')?.textContent || '#';
                const pubDate = item.querySelector('pubDate')?.textContent || '';
                let description = item.querySelector('description')?.textContent || '';
                let imgSrc = '';
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = description;
                const imgEl = tempDiv.querySelector('img');
                if (imgEl) { imgSrc = imgEl.src; imgEl.remove(); }
                description = tempDiv.textContent || '';
                const shortText = description.substring(0, 140) + (description.length > 140 ? '...' : '');
                const fecha = pubDate ? new Date(pubDate).toLocaleDateString('es-AR', {year:'numeric', month:'short', day:'numeric'}) : 'Fecha desconocida';
                allNewsItems.push({ title, link, shortText, imgSrc, fecha, source: feed.name });
            });
       

