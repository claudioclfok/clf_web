<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Validador CBU/CVU</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #f9f9f9;
    margin: 0;
    padding: 30px;
    text-align: center;
    color: #2c3e50;
}
header {
    background: #005baa;
    color: white;
    padding: 20px;
    margin-bottom: 30px;
}
header h1 { margin: 0; }
main {
    background: white;
    max-width: 600px;
    margin: auto;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
}
label { display: block; margin-bottom: 10px; font-weight: bold; }
input { width: 100%; padding: 10px; font-size: 1rem; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 6px; }
button { background: #005baa; color: white; border: none; padding: 12px 20px; font-size: 1rem; cursor: pointer; border-radius: 6px; }
button:hover { background: #004080; }
#resultado { margin-top: 20px; font-size: 1.2rem; font-weight: bold; }
#listado-bancos { margin-top: 40px; text-align: left; }
.accordion { background-color: #eee; color: #444; cursor: pointer; padding: 12px; width: 100%; border: none; text-align: left; outline: none; font-size: 1rem; transition: 0.3s; margin-bottom: 5px; border-radius: 4px; }
.active, .accordion:hover { background-color: #ccc; }
.panel { padding: 0 15px; display: none; background-color: white; overflow: hidden; border-left: 2px solid #005baa; margin-bottom: 5px; border-radius: 0 4px 4px 0; }
</style>
</head>
<body>
<header>
<h1>Validador de CBU/CVU</h1>
</header>
<main>
<form id="formValidador">
    <label for="codigo">Ingrese su CBU o CVU (22 dígitos):</label>
    <input type="text" id="codigo" maxlength="22" placeholder="Ejemplo: 2850590940090418135201" required>
    <button type="submit">Validar</button>
</form>
<div id="resultado"></div>

<div id="listado-bancos">
    <label>Listado de Bancos y Billeteras Virtuales:</label>
    <div id="accordion-container"></div>
</div>
</main>

<script>
const bancos = {
"011": "Banco de la Nación Argentina",
"014": "Banco de la Provincia de Buenos Aires",
"017": "Banco de la Provincia de Córdoba",
"019": "Banco de la Provincia de Santa Fe",
"027": "Banco Supervielle S.A.",
"029": "Banco de la Ciudad de Buenos Aires",
"034": "Banco Patagonia S.A.",
"044": "Banco Hipotecario S.A.",
"047": "Banco de Galicia y Buenos Aires S.A.",
"072": "Banco Santander Río S.A.",
"081": "Banco de la Provincia de Tierra del Fuego",
"100": "Banco Macro S.A.",
"143": "Banco del Chubut S.A.",
"147": "Banco B.I. Creditanstalt S.A.",
"150": "HSBC Bank Argentina S.A.",
"178": "Banco de la Provincia de Mendoza",
"191": "Banco de la Provincia de Jujuy",
"206": "Banco Comafi S.A.",
"208": "Banco de Servicios y Transacciones S.A.",
"220": "Banco Nación Argentina (Sucursal específica)",
"224": "Banco de Corrientes S.A.",
"259": "Banco Itaú Argentina S.A.",
"285": "Banco de la Nación Argentina",
"292": "Banco Credicoop Cooperativo Ltdo.",
"999": "Mercado Pago",
"998": "Ualá",
"997": "Todo Pago"
};

function obtenerBanco(cbu) {
    const codigoBanco = cbu.slice(0,3);
    const codigoSucursal = cbu.slice(3,7);
    const nombreBanco = bancos[codigoBanco] || "Banco desconocido";
    return {nombre: nombreBanco, codigoSucursal: codigoSucursal};
}

function validarCBU(cbu) {
    if (!/^[0-9]{22}$/.test(cbu)) return false;
    function validarBloque(bloque, pesos) {
        let suma = 0;
        for (let i=0;i<pesos.length;i++) suma += parseInt(bloque[i],10)*pesos[i];
        const verificador = (10-(suma%10))%10;
        return verificador === parseInt(bloque[bloque.length-1],10);
    }
    const bloque1 = cbu.slice(0,8);
    const bloque2 = cbu.slice(8,22);
    return validarBloque(bloque1,[7,1,3,9,7,1,3]) &&
           validarBloque(bloque2,[3,9,7,1,3,9,7,1,3,9,7,1,3]);
}

document.getElementById("formValidador").addEventListener("submit", function(e){
    e.preventDefault();
    const codigo = document.getElementById("codigo").value.trim();
    const resultado = document.getElementById("resultado");
    if (validarCBU(codigo)) {
        const banco = obtenerBanco(codigo);
        resultado.style.color="green";
        resultado.textContent = `✅ CBU/CVU válido - Banco: ${banco.nombre}, Sucursal: ${banco.codigoSucursal}`;
    } else {
        resultado.style.color="red";
        resultado.textContent = "❌ CBU/CVU no es válido";
    }
});

function crearAccordion() {
    const container = document.getElementById("accordion-container");
    for (let codigo in bancos) {
        let acc = document.createElement("button");
        acc.className = "accordion";
        acc.textContent = bancos[codigo];
        let panel = document.createElement("div");
        panel.className = "panel";
        panel.textContent = `Código: ${codigo}`;
        acc.addEventListener("click", function() {
            this.classList.toggle("active");
            panel.style.display = panel.style.display === "block" ? "none" : "block";
        });
        container.appendChild(acc);
        container.appendChild(panel);
    }
}

crearAccordion();
</script>
</body>
</html>
