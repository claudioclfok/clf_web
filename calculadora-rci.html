<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calculadora RCI</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f4f7;
}
.container {
  max-width: 1000px;
  margin: 20px auto;
  background: #fff;
  padding: 20px;
  border-radius: 8px;
}
h2, h3 {
  margin-top: 0;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
th, td {
  border: 1px solid #ccc;
  padding: 6px;
  text-align: right;
}
th {
  background: #eee;
}
input {
  width: 100%;
  padding: 6px;
}
.ok {
  background: #d4edda;
}
.no {
  background: #f8d7da;
}
.warn {
  background: #fff3cd;
}
.left {
  text-align: left;
}
</style>
</head>

<body>

<div class="container">
<h2>Calculadora RCI</h2>

<h3>Datos del solicitante</h3>
<table>
<tr><td class="left">Sueldo neto</td><td><input type="number" id="sueldo"></td></tr>
<tr><td class="left">Situación 1</td><td><input type="number" id="s1"></td></tr>
<tr><td class="left">Situación 2</td><td><input type="number" id="s2"></td></tr>
<tr><td class="left">Situación 3</td><td><input type="number" id="s3"></td></tr>
<tr><td class="left">Situación 4</td><td><input type="number" id="s4"></td></tr>
<tr><td class="left">Situación 5</td><td><input type="number" id="s5"></td></tr>
</table>

<h3>Resultado RCI</h3>
<table>
<tr><td class="left">Total deuda BCRA</td><td id="totalDeuda">0</td></tr>
<tr><td class="left">Endeudamiento (sueldos)</td><td id="endeudamiento">0</td></tr>
<tr><td class="left">RCI aplicado</td><td id="rci">-</td></tr>
<tr><td class="left">Cuota máxima disponible</td><td id="cuotaMax">-</td></tr>
</table>

<h3>Montos otorgables según RCI</h3>
<table>
<thead>
<tr>
<th>Capital</th>
<th>Cuotas</th>
<th>Cuota estimada</th>
<th>Estado</th>
</tr>
</thead>
<tbody id="tablaResultados"></tbody>
</table>
</div>

<script>
const inputs = document.querySelectorAll("input");
inputs.forEach(i => i.addEventListener("input", calcularRCI));

function calcularRCI() {
  const sueldo = Number(sueldoEl().value) || 0;

  const deudaTotal =
    (Number(s1.value) || 0) +
    (Number(s2.value) || 0) +
    (Number(s3.value) || 0) +
    (Number(s4.value) || 0) +
    (Number(s5.value) || 0);

  document.getElementById("totalDeuda").innerText = deudaTotal.toFixed(2);

  if (sueldo <= 0) {
    limpiarResultados();
    return;
  }

  const endeudamiento = deudaTotal / sueldo;
  document.getElementById("endeudamiento").innerText = endeudamiento.toFixed(2);

  let rciPorcentaje = 0;
  let rciTexto = "";

  if (endeudamiento <= 10) {
    rciPorcentaje = 0.15;
    rciTexto = "15 %";
  } else if (endeudamiento > 10 && endeudamiento <= 15) {
    rciPorcentaje = 0.10;
    rciTexto = "10 %";
  } else {
    document.getElementById("rci").innerText = "ANÁLISIS / RIESGOS";
    document.getElementById("cuotaMax").innerText = "-";
    document.getElementById("tablaResultados").innerHTML = "";
    return;
  }

  document.getElementById("rci").innerText = rciTexto;

  const cuotaMaxima = sueldo * rciPorcentaje - deudaTotal;
  document.getElementById("cuotaMax").innerText = cuotaMaxima.toFixed(2);

  generarTabla(cuotaMaxima);
}

function generarTabla(cuotaMaxima) {
  const tbody = document.getElementById("tablaResultados");
  tbody.innerHTML = "";

  const capitales = [200000, 300000, 500000, 800000, 1000000, 1500000];
  const cuotas = [6, 12, 18, 24, 36];
  const tasaMensual = 0.08; // tasa estimada

  capitales.forEach(capital => {
    cuotas.forEach(cuotasCant => {
      const cuota = (capital * (1 + tasaMensual * cuotasCant)) / cuotasCant;
      const otorgable = cuota <= cuotaMaxima;

      const tr = document.createElement("tr");
      tr.className = otorgable ? "ok" : "no";

      tr.innerHTML = `
        <td>${capital.toLocaleString()}</td>
        <td>${cuotasCant}</td>
        <td>${cuota.toFixed(2)}</td>
        <td>${otorgable ? "OTORGABLE" : "NO"}</td>
      `;
      tbody.appendChild(tr);
    });
  });
}

function limpiarResultados() {
  document.getElementById("endeudamiento").innerText = "0";
  document.getElementById("rci").innerText = "-";
  document.getElementById("cuotaMax").innerText = "-";
  document.getElementById("tablaResultados").innerHTML = "";
}

function sueldoEl() {
  return document.getElementById("sueldo");
}

const s1 = document.getElementById("s1");
const s2 = document.getElementById("s2");
const s3 = document.getElementById("s3");
const s4 = document.getElementById("s4");
const s5 = document.getElementById("s5");
</script>

</body>
</html>
